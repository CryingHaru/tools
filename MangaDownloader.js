// ==UserScript==
// @name         Manga Downloader
// @namespace    http://tampermonkey.net/
// @version      1.2.1
// @description  Userscript By HaruCraft para Unknown Realm Scan
// @author       HaruCraft
// @updateURL https://raw.githubusercontent.com/CryingHaru/The-secretcave/main/MangaDownloader.js
// @downloadURL https://raw.githubusercontent.com/CryingHaru/The-secretcave/main/MangaDownloader.js
// @match        https://lectortmo.com/*/*/cascade
// @match        https://page.kakao.com/content/*/viewer/*
// @match        https://mangadex.org/chapter/*/*
// @match        https://coffeemanga.io/manga/*/*/
// @match        https://mangaplus.shueisha.co.jp/viewer/*
// @match        https://mangakakalot.com/chapter/*/*
// @match        https://chapmanganato.com/*/*
// @icon         https://cdn.discordapp.com/icons/704858194245189633/e88648c206806ffd5b5a485f17f98b94.png?size=2048
// @require      https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js
// @grant        GM_getResourceURL
// @grant        GM_notification
// @grant        GM_xmlhttpRequest
// @grant        GM_download
// ==/UserScript==
(function() {
    'use strict';
const _0x52c40a=_0x2449;(function(_0x2e1c7a,_0x31adfa){const _0x1181e2=_0x2449,_0x124c4f=_0x2e1c7a();while(!![]){try{const _0x1df131=parseInt(_0x1181e2(0x220))/0x1+-parseInt(_0x1181e2(0x1e8))/0x2+-parseInt(_0x1181e2(0x219))/0x3+parseInt(_0x1181e2(0x1c0))/0x4*(parseInt(_0x1181e2(0x1d5))/0x5)+-parseInt(_0x1181e2(0x1cc))/0x6+parseInt(_0x1181e2(0x209))/0x7+parseInt(_0x1181e2(0x218))/0x8*(-parseInt(_0x1181e2(0x1cd))/0x9);if(_0x1df131===_0x31adfa)break;else _0x124c4f['push'](_0x124c4f['shift']());}catch(_0x20666e){_0x124c4f['push'](_0x124c4f['shift']());}}}(_0x5c36,0xa2565));const _0x5cf928=(function(){let _0x5c4980=!![];return function(_0x317381,_0x107ad0){const _0x475468=_0x5c4980?function(){if(_0x107ad0){const _0x50ccfb=_0x107ad0['apply'](_0x317381,arguments);return _0x107ad0=null,_0x50ccfb;}}:function(){};return _0x5c4980=![],_0x475468;};}()),_0x1c7b47=_0x5cf928(this,function(){const _0x57e117=_0x2449;return _0x1c7b47['toString']()[_0x57e117(0x1d6)](_0x57e117(0x1f2))[_0x57e117(0x1d2)]()[_0x57e117(0x227)](_0x1c7b47)[_0x57e117(0x1d6)](_0x57e117(0x1f2));});_0x1c7b47();const _0x1d83ce=(function(){let _0x4e3b2f=!![];return function(_0x43a621,_0x249b28){const _0x10ca10=_0x4e3b2f?function(){if(_0x249b28){const _0x3323ad=_0x249b28['apply'](_0x43a621,arguments);return _0x249b28=null,_0x3323ad;}}:function(){};return _0x4e3b2f=![],_0x10ca10;};}());(function(){_0x1d83ce(this,function(){const _0x526074=_0x2449,_0x22c454=new RegExp(_0x526074(0x20c)),_0x4b4d4d=new RegExp(_0x526074(0x1fe),'i'),_0x4e79c8=_0x1a928b('init');!_0x22c454[_0x526074(0x210)](_0x4e79c8+'chain')||!_0x4b4d4d[_0x526074(0x210)](_0x4e79c8+_0x526074(0x237))?_0x4e79c8('0'):_0x1a928b();})();}());const pageTitle=document[_0x52c40a(0x230)];function loades(){const _0x2cd883=_0x52c40a,_0x24ad86=document['body'],_0x51bc3b=document[_0x2cd883(0x1da)](_0x2cd883(0x1e0));let _0x4cc299=0x0;const _0xa011c2=[];_0x51bc3b['forEach'](_0x5d5588=>{const _0xec05df=_0x2cd883;if(_0x5d5588[_0xec05df(0x1dc)]>=0x190){_0x4cc299++;const _0x249b5b=_0x5d5588['getAttribute'](_0xec05df(0x235))||_0x5d5588[_0xec05df(0x21c)](_0xec05df(0x1c2));_0x249b5b&&_0xa011c2[_0xec05df(0x21a)](_0x249b5b[_0xec05df(0x1c9)]());}});const _0x43362d=_0xa011c2[_0x2cd883(0x222)](_0x3dc0ec=>_0x2cd883(0x233)+_0x3dc0ec+'\x22>');while(_0x24ad86[_0x2cd883(0x1f7)]){_0x24ad86[_0x2cd883(0x21f)](_0x24ad86[_0x2cd883(0x1f7)]);}_0x24ad86[_0x2cd883(0x206)]=_0x43362d[_0x2cd883(0x1be)](''),console['log']('Descargando\x20'+_0x4cc299+_0x2cd883(0x22c)),document[_0x2cd883(0x1eb)][_0x2cd883(0x20d)](container),setTimeout(function(){const _0x28794a=_0x2cd883;progressText[_0x28794a(0x1c7)]!==_0x28794a(0x1c5)?console['log'](_0x28794a(0x1ff)):(progressText[_0x28794a(0x1c7)]=_0x28794a(0x211),setProgressImage(0x0),console['log'](_0x28794a(0x225)),setTimeout(function(){const _0x2d60a9=_0x28794a;progressText[_0x2d60a9(0x1c7)]=_0x2d60a9(0x1c5),loades();},0x1388));},0x2710);var _0x28eaaa=new JSZip();let _0x351bea=0x0,_0x57ca35=0x0;setProgressImage(0x1);function _0x3188d6(_0x2ead20){const _0x598a4e=_0x2cd883;let _0x36bf84=window[_0x598a4e(0x1e6)]['origin']+'/',_0x51ec0c=_0xa011c2[_0x2ead20];if(_0x51ec0c[_0x598a4e(0x201)](_0x598a4e(0x1df))||_0x51ec0c[_0x598a4e(0x201)]('.png')||_0x51ec0c['endsWith'](_0x598a4e(0x1cb))){let _0x5e3d60=document[_0x598a4e(0x1d3)](_0x598a4e(0x223)),_0x5046f2=_0x5e3d60[_0x598a4e(0x1f5)]('2d'),_0x50f144=new Image();_0x50f144[_0x598a4e(0x1e9)]=_0x598a4e(0x229),_0x50f144[_0x598a4e(0x1cf)]=function(){const _0x3fa7da=_0x598a4e;_0x5e3d60['width']=_0x50f144[_0x3fa7da(0x1dc)],_0x5e3d60['height']=_0x50f144['height'],_0x5046f2[_0x3fa7da(0x21b)](_0x50f144,0x0,0x0);let _0x1937aa=_0x5e3d60[_0x3fa7da(0x1dd)](_0x3fa7da(0x205)),_0x2b8eea=_0xb45cf5(_0x1937aa);setProgressImage(0x2),_0x484d78(_0x2ead20,_0x2b8eea);},_0x50f144[_0x598a4e(0x1c2)]=_0x51ec0c;}else setProgressImage(0x2),GM_xmlhttpRequest({'method':_0x598a4e(0x20b),'url':_0x51ec0c,'headers':{'referer':_0x36bf84},'responseType':_0x598a4e(0x1fa),'onload':function(_0xd1b568){const _0x948934=_0x598a4e;setProgressImage(0x2),_0x484d78(_0x2ead20,_0xd1b568[_0x948934(0x208)]);},'onerror':function(_0x2a4cfb){const _0x3dd123=_0x598a4e;setProgressImage(0x0),console[_0x3dd123(0x234)]('Error\x20downloading\x20image:\x20'+_0x2a4cfb[_0x3dd123(0x1bc)]),_0x351bea<_0x4cc299&&_0x3188d6(_0x2ead20+0x1);}});}function _0xb45cf5(_0x5886e6){const _0x4c00ea=_0x2cd883;let _0x4dd16b=_0x5886e6[_0x4c00ea(0x22b)](','),_0x3d1677=_0x4dd16b[0x0][_0x4c00ea(0x22b)](':')[0x1],_0x4fce1b=atob(_0x4dd16b[0x1]),_0xa60244=new ArrayBuffer(_0x4fce1b['length']),_0x3f41f5=new Uint8Array(_0xa60244);for(let _0x24ba0f=0x0;_0x24ba0f<_0x4fce1b['length'];_0x24ba0f++){_0x3f41f5[_0x24ba0f]=_0x4fce1b[_0x4c00ea(0x1f8)](_0x24ba0f);}return new Blob([_0xa60244],{'type':_0x3d1677});}function _0x484d78(_0x48fecb,_0x5d8819){const _0x18d8c0=_0x2cd883;try{_0x351bea++,_0x28eaaa[_0x18d8c0(0x22e)](_0x351bea+_0x18d8c0(0x224),_0x5d8819,{'base64':!![]}),console[_0x18d8c0(0x236)](_0x351bea+'/'+_0x4cc299),_0x351bea==_0x4cc299?(updateProgress(_0x351bea,_0x351bea,_0x4cc299),progressText[_0x18d8c0(0x1c7)]=_0x18d8c0(0x1ce),setProgressImage(0x1),console[_0x18d8c0(0x236)](_0x18d8c0(0x1ce)),setTimeout(function(){const _0x1f93bb=_0x18d8c0;_0x28eaaa[_0x1f93bb(0x1de)]({'type':_0x1f93bb(0x1fa)})[_0x1f93bb(0x1e4)](function(_0x5b41d0){const _0x17e408=_0x1f93bb;progressText[_0x17e408(0x1c7)]=_0x17e408(0x1c1),setProgressImage(0x3),saveAs(_0x5b41d0,pageTitle+'.zip'),setTimeout(function(){const _0x345715=_0x17e408;document['body'][_0x345715(0x21f)](container);},0x7d0);})[_0x1f93bb(0x1e7)](function(_0x37facd){const _0x4eeeb1=_0x1f93bb;setProgressImage(0x0),progressText[_0x4eeeb1(0x1c7)]=_0x4eeeb1(0x1c3),console[_0x4eeeb1(0x234)](_0x4eeeb1(0x1ea),_0x37facd);});},0xbb8)):(updateProgress(_0x351bea,_0x351bea,_0x4cc299),_0x3188d6(_0x48fecb+0x1));}catch(_0x55f27b){setProgressImage(0x0),progressText[_0x18d8c0(0x1c7)]='Error\x20al\x20guardar\x20el\x20png',console['error'](_0x18d8c0(0x22d),_0x55f27b);}}_0xa011c2[_0x2cd883(0x21e)]>0x0&&_0x3188d6(0x0);}const button=document[_0x52c40a(0x1d3)](_0x52c40a(0x1f3));button['textContent']=_0x52c40a(0x1f1),button[_0x52c40a(0x213)][_0x52c40a(0x215)]=_0x52c40a(0x1ee),button[_0x52c40a(0x213)][_0x52c40a(0x1e5)]=_0x52c40a(0x1c6),button[_0x52c40a(0x213)][_0x52c40a(0x1fd)]=_0x52c40a(0x1f4),button[_0x52c40a(0x213)][_0x52c40a(0x200)]=_0x52c40a(0x217),button[_0x52c40a(0x213)][_0x52c40a(0x1f6)]=_0x52c40a(0x204),button[_0x52c40a(0x213)][_0x52c40a(0x1d0)]=_0x52c40a(0x214),button[_0x52c40a(0x213)][_0x52c40a(0x203)]=_0x52c40a(0x1f9),button[_0x52c40a(0x213)][_0x52c40a(0x1bb)]='center',button[_0x52c40a(0x213)][_0x52c40a(0x22f)]=_0x52c40a(0x204),button[_0x52c40a(0x213)][_0x52c40a(0x231)]=_0x52c40a(0x221),button[_0x52c40a(0x213)]['fontSize']=_0x52c40a(0x1bf),button['style']['borderRadius']=_0x52c40a(0x1f0),button[_0x52c40a(0x213)]['cursor']='pointer',button['style']['boxShadow']='0\x204px\x206px\x20rgba(0,\x200,\x200,\x200.1)',(function(){const _0x2bb1b9=function(){const _0x36b5b1=_0x2449;let _0x1a5804;try{_0x1a5804=Function(_0x36b5b1(0x1c4)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x58d24c){_0x1a5804=window;}return _0x1a5804;},_0x148503=_0x2bb1b9();_0x148503['setInterval'](_0x1a928b,0x2);}()),button['style'][_0x52c40a(0x20a)]=_0x52c40a(0x228),button['addEventListener']('click',()=>{loades();});function checkImagesLoaded(){const _0x429eca=_0x52c40a,_0x29e03d=document[_0x429eca(0x1da)](_0x429eca(0x202));let _0x977a6f=!![];_0x29e03d[_0x429eca(0x1bd)](_0x1c6aef=>{const _0x2f214f=_0x429eca;_0x1c6aef[_0x2f214f(0x1fc)]!==0x190&&(_0x977a6f=![]);}),_0x977a6f?(console[_0x429eca(0x236)](_0x429eca(0x238)),document[_0x429eca(0x1eb)][_0x429eca(0x20d)](button)):(console[_0x429eca(0x236)](_0x429eca(0x1ba)),setTimeout(checkImagesLoaded,0xbb8));}window[_0x52c40a(0x1db)]('load',function(){checkImagesLoaded();});const progressBar=document[_0x52c40a(0x1d3)]('div');progressBar[_0x52c40a(0x213)][_0x52c40a(0x1dc)]='0%',progressBar[_0x52c40a(0x213)]['height']='20px',progressBar['style'][_0x52c40a(0x200)]=_0x52c40a(0x20e),progressBar[_0x52c40a(0x213)][_0x52c40a(0x1b9)]='5px';function _0x5c36(){const _0x21468d=['input','Todas\x20las\x20imágenes\x20con\x20un\x20ancho\x20de\x20400px\x20han\x20sido\x20cargadas','marginTop','No\x20todas\x20las\x20imágenes\x20con\x20un\x20ancho\x20de\x20400px\x20han\x20sido\x20cargadas.\x20Reintentando\x20en\x203\x20segundos...','textAlign','statusText','forEach','join','16px','34536eMDQpq','Listo','src','Error\x20al\x20generar\x20el\x20zip','return\x20(function()\x20','Iniciando\x20descarga','10%','innerText','https://cdn.discordapp.com/emojis/669517190663372800.gif','trim','https://cdn.discordapp.com/emojis/964018220820480010.gif','.tiff','2204424YLJsvN','127854OYVqcS','Comprimiendo\x20imagenes','onload','color','background','toString','createElement','counter','615PRvCtJ','search','height','\x20de\x20','gger','querySelectorAll','addEventListener','width','toDataURL','generateAsync','.webp','img','Descargando\x20','call','black','then','top','location','catch','47766jrtAXu','crossOrigin','Error\x20generating\x20zip\x20file:','body','apply','progress-container','fixed','debu','4px','Descargar\x20capitulo','(((.+)+)+)+$','button','50%','getContext','border','firstChild','charCodeAt','10px\x2020px','blob','while\x20(true)\x20{}','naturalWidth','left','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','Inicio\x20de\x20descarga\x20Exitoso!','backgroundColor','endsWith','img[width=\x22400\x22]','padding','none','image/png','innerHTML','string','response','4578126tCAPot','transform','get','function\x20*\x5c(\x20*\x5c)','appendChild','blue','margin','test','Ha\x20ocurrido\x20un\x20error.\x20Reintentando...','stateObject','style','white','position','100px','#008CBA','616WGJJhM','1813806eKNRFS','push','drawImage','getAttribute','400px','length','removeChild','1038684BcyPvO','inline-block','map','canvas','.jpg','El\x20sistema\x20de\x20carga\x20falló','10px','constructor','translate(-50%,\x20-50%)','anonymous','center','split','\x20Imagenes','Error\x20saving\x20blob\x20as\x20png:','file','textDecoration','title','display','200px','<img\x20src=\x22','error','data-src','log'];_0x5c36=function(){return _0x21468d;};return _0x5c36();}const progressImage=document['createElement'](_0x52c40a(0x1e0));progressImage['style'][_0x52c40a(0x231)]='block',progressImage[_0x52c40a(0x213)][_0x52c40a(0x20f)]='0\x20auto',progressImage[_0x52c40a(0x213)][_0x52c40a(0x1dc)]=_0x52c40a(0x216);const progressText=document[_0x52c40a(0x1d3)]('p');function _0x2449(_0x341eba,_0x423692){const _0x2fa0b7=_0x5c36();return _0x2449=function(_0x1a928b,_0x1d83ce){_0x1a928b=_0x1a928b-0x1b9;let _0x256b2d=_0x2fa0b7[_0x1a928b];return _0x256b2d;},_0x2449(_0x341eba,_0x423692);}progressText[_0x52c40a(0x213)][_0x52c40a(0x1b9)]=_0x52c40a(0x226),progressText[_0x52c40a(0x213)][_0x52c40a(0x1bb)]=_0x52c40a(0x22a),progressText[_0x52c40a(0x1c7)]=_0x52c40a(0x1c5);const container=document['createElement'](_0x52c40a(0x1ed));container[_0x52c40a(0x20d)](progressImage),container['appendChild'](progressBar),container[_0x52c40a(0x20d)](progressText),container[_0x52c40a(0x213)]['position']=_0x52c40a(0x1ee),container[_0x52c40a(0x213)][_0x52c40a(0x1e5)]=_0x52c40a(0x1f4),container[_0x52c40a(0x213)][_0x52c40a(0x1fd)]='50%',container[_0x52c40a(0x213)][_0x52c40a(0x20a)]=_0x52c40a(0x228),container['style'][_0x52c40a(0x1dc)]=_0x52c40a(0x21d),container[_0x52c40a(0x213)][_0x52c40a(0x1d7)]=_0x52c40a(0x232),progressText[_0x52c40a(0x213)][_0x52c40a(0x1d1)]=_0x52c40a(0x1e3),progressText['style'][_0x52c40a(0x1d0)]=_0x52c40a(0x214);function setProgressImage(_0x4c8203){const _0x4ec1d6=_0x52c40a;if(_0x4c8203===0x1)progressImage[_0x4ec1d6(0x1c2)]='https://cdn.discordapp.com/emojis/893175968187961414.png';else{if(_0x4c8203===0x2)progressImage[_0x4ec1d6(0x1c2)]=_0x4ec1d6(0x1ca);else{if(_0x4c8203===0x3)progressImage[_0x4ec1d6(0x1c2)]='https://cdn.discordapp.com/emojis/925177978143535135.png?v=1';else _0x4c8203===0x0&&(progressImage[_0x4ec1d6(0x1c2)]=_0x4ec1d6(0x1c8));}}}function updateProgress(_0x529534,_0x2d0858,_0x4c57e4){const _0x174abb=_0x52c40a;progressBar[_0x174abb(0x213)]['width']=_0x2d0858/_0x4c57e4*0x64+'%',progressText[_0x174abb(0x1c7)]=_0x174abb(0x1e1)+_0x2d0858+_0x174abb(0x1d8)+_0x4c57e4;}function _0x1a928b(_0xb60901){function _0xf5f3da(_0x40d236){const _0x18daf2=_0x2449;if(typeof _0x40d236===_0x18daf2(0x207))return function(_0x56ade7){}[_0x18daf2(0x227)](_0x18daf2(0x1fb))[_0x18daf2(0x1ec)](_0x18daf2(0x1d4));else(''+_0x40d236/_0x40d236)[_0x18daf2(0x21e)]!==0x1||_0x40d236%0x14===0x0?function(){return!![];}[_0x18daf2(0x227)]('debu'+_0x18daf2(0x1d9))[_0x18daf2(0x1e2)]('action'):function(){return![];}['constructor'](_0x18daf2(0x1ef)+_0x18daf2(0x1d9))[_0x18daf2(0x1ec)](_0x18daf2(0x212));_0xf5f3da(++_0x40d236);}try{if(_0xb60901)return _0xf5f3da;else _0xf5f3da(0x0);}catch(_0x2b5df7){}}
})();
